<!DOCTYPE html>
<html>
<head>
  <title>Browse Trips</title>
  <script src="https://unpkg.com/@supabase/supabase-js"></script>
</head>
<body>
  <h2>Trips</h2>
  <div id="tripList"></div>

  <script>
    const { createClient } = supabase;
    const supabaseUrl = "https://vupinegpbzhhadkgkpgv.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ1cGluZWdwYnpoaGFka2drcGd2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzODA0MTcsImV4cCI6MjA3NDk1NjQxN30.3wxZ1_wXcJ7bmMO8sGrkjK-n2RW3g3WhrVi1ESvzgHg";
    const db = createClient(supabaseUrl, supabaseKey);

    async function loadTrips() {
      const { data, error } = await db.from("trips").select("*");
      if (error) { alert(error.message); return; }
      let html = "";
      data.forEach(t => { html += `<div><b>${t.start_city} → ${t.end_city}</b><br>₹${t.price_per_seat}, Seats: ${t.seats_available}<br><a href="book.html?trip=${t.id}">Book</a><hr></div>`; });
      document.getElementById("tripList").innerHTML = html;
    }
    loadTrips();
  </script>
</body>
</html>
